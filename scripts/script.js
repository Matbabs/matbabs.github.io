// Manage Menu

let isMenuOpen = false;

const menu = document.querySelector(".links");
const toggleIcon = document.querySelector("#toggle-icon");

function toggleMenu() {
  if (!isMenuOpen) {
    menu.classList.add("open");
    toggleIcon.classList.remove("fa-bars");
    toggleIcon.classList.add("fa-close");
  } else {
    menu.classList.remove("open");
    toggleIcon.classList.add("fa-bars");
    toggleIcon.classList.remove("fa-close");
  }
  isMenuOpen = !isMenuOpen;
}

// Manage GPX trail files

const PROFILE_12_KM = [
  205.0, 205.0, 205.0, 205.0, 207.0, 207.0, 207.0, 207.0, 207.0, 207.0, 207.0,
  212.0, 212.0, 190.0, 190.0, 186.0, 186.0, 186.0, 192.0, 192.0, 192.0, 192.0,
  192.0, 192.0, 192.0, 192.0, 192.0, 170.0, 170.0, 170.0, 170.0, 170.0, 177.0,
  177.0, 177.0, 177.0, 171.0, 171.0, 171.0, 168.0, 168.0, 168.0, 168.0, 168.0,
  168.0, 168.0, 182.0, 161.0, 161.0, 161.0, 161.0, 161.0, 161.0, 161.0, 161.0,
  161.0, 155.0, 155.0, 155.0, 155.0, 155.0, 154.0, 154.0, 154.0, 154.0, 154.0,
  154.0, 171.0, 171.0, 174.0, 174.0, 174.0, 174.0, 174.0, 182.0, 182.0, 182.0,
  182.0, 198.0, 198.0, 198.0, 198.0, 186.0, 186.0, 186.0, 186.0, 186.0, 210.0,
  210.0, 210.0, 188.0, 188.0, 194.0, 194.0, 211.0, 211.0, 211.0, 211.0, 211.0,
  211.0, 211.0, 210.0, 210.0, 210.0, 210.0, 210.0, 210.0, 210.0, 205.0, 198.0,
  195.0, 195.0, 195.0, 195.0, 205.0, 201.0, 201.0, 211.0, 201.0, 201.0, 201.0,
  211.0, 211.0, 211.0, 211.0, 211.0, 208.0, 208.0, 208.0, 209.0, 209.0, 209.0,
  209.0, 209.0, 209.0, 208.0, 208.0, 195.0, 195.0, 195.0, 201.0, 201.0, 201.0,
  201.0, 201.0, 201.0, 201.0, 188.0, 188.0, 188.0, 188.0, 188.0, 188.0, 196.0,
  196.0, 196.0, 196.0, 196.0, 196.0, 188.0, 188.0, 188.0, 188.0, 188.0, 188.0,
  188.0, 169.0, 169.0, 169.0, 169.0, 169.0, 169.0, 169.0, 169.0, 169.0, 169.0,
  169.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 134.0, 134.0,
  134.0, 134.0, 134.0, 142.0, 142.0, 142.0, 142.0, 169.0, 169.0, 169.0, 169.0,
  169.0, 169.0, 169.0, 169.0, 188.0, 169.0, 168.0, 168.0, 168.0, 171.0, 171.0,
  171.0, 171.0, 171.0, 193.0, 193.0, 193.0, 193.0, 201.0, 201.0, 191.0, 191.0,
  184.0, 184.0, 184.0, 184.0, 172.0, 172.0, 172.0, 154.0, 154.0, 154.0, 152.0,
  154.0, 154.0, 142.0, 142.0, 155.0, 155.0, 160.0, 160.0, 160.0, 160.0, 160.0,
  149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 159.0,
  159.0, 159.0, 159.0, 159.0, 174.0, 174.0, 172.0, 172.0, 172.0, 172.0, 172.0,
  172.0, 172.0, 172.0, 172.0, 174.0, 174.0, 179.0, 179.0, 180.0, 180.0, 180.0,
  179.0, 179.0, 179.0, 179.0, 179.0, 179.0, 180.0, 180.0, 186.0, 180.0, 180.0,
  180.0, 194.0, 196.0, 196.0, 196.0, 196.0, 196.0, 205.0,
];

const PROFILE_25_KM = [
  205.0, 205.0, 205.0, 196.0, 196.0, 199.0, 195.0, 185.0, 185.0, 185.0, 190.0,
  190.0, 191.0, 191.0, 191.0, 191.0, 181.0, 181.0, 181.0, 181.0, 181.0, 181.0,
  181.0, 181.0, 181.0, 181.0, 173.0, 173.0, 173.0, 161.0, 161.0, 161.0, 161.0,
  161.0, 161.0, 161.0, 161.0, 161.0, 162.0, 162.0, 162.0, 162.0, 162.0, 157.0,
  157.0, 157.0, 157.0, 157.0, 157.0, 153.0, 153.0, 153.0, 153.0, 153.0, 141.0,
  141.0, 141.0, 141.0, 141.0, 141.0, 135.0, 135.0, 135.0, 135.0, 136.0, 136.0,
  134.0, 134.0, 134.0, 134.0, 136.0, 134.0, 134.0, 134.0, 134.0, 134.0, 134.0,
  138.0, 138.0, 138.0, 133.0, 133.0, 138.0, 138.0, 133.0, 133.0, 133.0, 130.0,
  130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 150.0, 150.0, 150.0,
  130.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0,
  142.0, 152.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 136.0, 136.0, 136.0,
  136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 131.0, 131.0, 131.0, 131.0, 131.0,
  127.0, 127.0, 127.0, 127.0, 127.0, 132.0, 132.0, 132.0, 126.0, 136.0, 136.0,
  136.0, 135.0, 135.0, 135.0, 126.0, 126.0, 126.0, 126.0, 126.0, 126.0, 126.0,
  126.0, 138.0, 134.0, 134.0, 134.0, 134.0, 134.0, 134.0, 134.0, 134.0, 134.0,
  134.0, 134.0, 132.0, 132.0, 132.0, 132.0, 132.0, 129.0, 129.0, 129.0, 129.0,
  129.0, 122.0, 120.0, 120.0, 120.0, 120.0, 120.0, 120.0, 120.0, 120.0, 120.0,
  120.0, 120.0, 120.0, 120.0, 120.0, 130.0, 114.0, 114.0, 114.0, 114.0, 114.0,
  114.0, 114.0, 114.0, 114.0, 114.0, 131.0, 131.0, 129.0, 129.0, 146.0, 146.0,
  146.0, 146.0, 146.0, 146.0, 153.0, 153.0, 144.0, 144.0, 144.0, 144.0, 144.0,
  144.0, 108.0, 108.0, 108.0, 144.0, 144.0, 129.0, 113.0, 113.0, 113.0, 113.0,
  113.0, 113.0, 113.0, 113.0, 113.0, 113.0, 114.0, 114.0, 114.0, 114.0, 114.0,
  114.0, 114.0, 120.0, 120.0, 120.0, 120.0, 120.0, 127.0, 127.0, 127.0, 127.0,
  127.0, 127.0, 136.0, 136.0, 136.0, 150.0, 150.0, 150.0, 150.0, 161.0, 177.0,
  177.0, 188.0, 188.0, 188.0, 192.0, 192.0, 192.0, 189.0, 191.0, 191.0, 191.0,
  191.0, 188.0, 188.0, 193.0, 186.0, 186.0, 193.0, 188.0, 188.0, 184.0, 187.0,
  187.0, 187.0, 187.0, 191.0, 191.0, 191.0, 191.0, 191.0, 181.0, 181.0, 181.0,
  181.0, 180.0, 180.0, 180.0, 180.0, 179.0, 179.0, 171.0, 171.0, 171.0, 171.0,
  171.0, 171.0, 161.0, 161.0, 157.0, 157.0, 157.0, 157.0, 180.0, 180.0, 180.0,
  150.0, 150.0, 150.0, 163.0, 163.0, 154.0, 154.0, 154.0, 154.0, 140.0, 140.0,
  140.0, 140.0, 130.0, 140.0, 140.0, 130.0, 135.0, 135.0, 146.0, 146.0, 146.0,
  158.0, 158.0, 158.0, 158.0, 158.0, 158.0, 158.0, 158.0, 158.0, 166.0, 166.0,
  158.0, 158.0, 158.0, 158.0, 155.0, 166.0, 166.0, 166.0, 166.0, 168.0, 166.0,
  168.0, 175.0, 175.0, 175.0, 175.0, 176.0, 176.0, 176.0, 176.0, 181.0, 178.0,
  178.0, 170.0, 170.0, 170.0, 170.0, 170.0, 170.0, 155.0, 155.0, 155.0, 155.0,
  155.0, 153.0, 153.0, 153.0, 137.0, 137.0, 137.0, 137.0, 128.0, 128.0, 128.0,
  152.0, 152.0, 152.0, 152.0, 157.0, 188.0, 157.0, 144.0, 144.0, 144.0, 144.0,
  166.0, 166.0, 166.0, 129.0, 129.0, 140.0, 140.0, 140.0, 140.0, 140.0, 140.0,
  140.0, 140.0, 165.0, 166.0, 166.0, 166.0, 166.0, 166.0, 184.0, 196.0, 196.0,
  196.0, 196.0, 184.0, 184.0, 188.0, 188.0, 188.0, 188.0, 188.0, 195.0, 208.0,
  208.0, 208.0, 208.0, 208.0, 209.0, 209.0, 209.0, 209.0, 209.0, 209.0, 208.0,
  195.0, 195.0, 195.0, 201.0, 201.0, 201.0, 201.0, 201.0, 188.0, 188.0, 188.0,
  188.0, 196.0, 196.0, 196.0, 196.0, 196.0, 188.0, 188.0, 188.0, 188.0, 169.0,
  169.0, 169.0, 169.0, 169.0, 169.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0,
  152.0, 134.0, 134.0, 142.0, 142.0, 142.0, 169.0, 169.0, 169.0, 169.0, 188.0,
  188.0, 168.0, 168.0, 168.0, 168.0, 168.0, 168.0, 171.0, 171.0, 171.0, 171.0,
  171.0, 193.0, 193.0, 193.0, 209.0, 209.0, 201.0, 201.0, 201.0, 193.0, 184.0,
  184.0, 184.0, 184.0, 172.0, 172.0, 172.0, 154.0, 154.0, 154.0, 154.0, 154.0,
  152.0, 142.0, 142.0, 142.0, 155.0, 160.0, 160.0, 160.0, 160.0, 160.0, 160.0,
  149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 159.0,
  159.0, 159.0, 159.0, 159.0, 174.0, 174.0, 174.0, 172.0, 172.0, 172.0, 172.0,
  172.0, 172.0, 174.0, 174.0, 174.0, 174.0, 179.0, 179.0, 179.0, 179.0, 180.0,
  180.0, 180.0, 179.0, 179.0, 179.0, 179.0, 179.0, 179.0, 179.0, 180.0, 180.0,
  180.0, 186.0, 180.0, 180.0, 180.0, 180.0, 196.0, 196.0, 196.0, 196.0, 196.0,
  205.0,
];

const PROFILE_42_KM = [
  205.0, 205.0, 205.0, 205.0, 205.0, 205.0, 205.0, 205.0, 205.0, 185.0, 185.0,
  162.0, 173.0, 173.0, 173.0, 173.0, 173.0, 173.0, 173.0, 173.0, 173.0, 173.0,
  173.0, 189.0, 189.0, 189.0, 189.0, 189.0, 189.0, 189.0, 189.0, 189.0, 189.0,
  189.0, 203.0, 203.0, 186.0, 186.0, 186.0, 186.0, 186.0, 186.0, 186.0, 186.0,
  186.0, 186.0, 186.0, 186.0, 186.0, 186.0, 202.0, 202.0, 202.0, 202.0, 202.0,
  202.0, 207.0, 207.0, 201.0, 207.0, 207.0, 207.0, 215.0, 215.0, 215.0, 215.0,
  215.0, 215.0, 215.0, 220.0, 220.0, 220.0, 220.0, 229.0, 229.0, 229.0, 229.0,
  229.0, 231.0, 231.0, 231.0, 231.0, 231.0, 231.0, 231.0, 214.0, 214.0, 214.0,
  214.0, 214.0, 214.0, 207.0, 207.0, 207.0, 214.0, 214.0, 214.0, 214.0, 214.0,
  212.0, 212.0, 212.0, 212.0, 212.0, 212.0, 224.0, 224.0, 224.0, 224.0, 224.0,
  224.0, 224.0, 224.0, 215.0, 215.0, 215.0, 215.0, 215.0, 215.0, 201.0, 201.0,
  201.0, 215.0, 215.0, 215.0, 215.0, 215.0, 224.0, 224.0, 176.0, 224.0, 224.0,
  212.0, 212.0, 212.0, 212.0, 212.0, 189.0, 189.0, 189.0, 176.0, 176.0, 176.0,
  176.0, 168.0, 168.0, 168.0, 168.0, 172.0, 172.0, 172.0, 172.0, 172.0, 172.0,
  172.0, 172.0, 172.0, 172.0, 172.0, 172.0, 164.0, 164.0, 164.0, 165.0, 165.0,
  165.0, 165.0, 165.0, 165.0, 164.0, 184.0, 184.0, 191.0, 191.0, 191.0, 189.0,
  189.0, 189.0, 182.0, 182.0, 182.0, 182.0, 182.0, 182.0, 182.0, 178.0, 178.0,
  178.0, 178.0, 178.0, 178.0, 178.0, 178.0, 157.0, 157.0, 157.0, 157.0, 157.0,
  157.0, 157.0, 160.0, 160.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0,
  162.0, 169.0, 162.0, 169.0, 169.0, 169.0, 169.0, 179.0, 179.0, 179.0, 185.0,
  185.0, 179.0, 191.0, 184.0, 184.0, 184.0, 184.0, 184.0, 184.0, 184.0, 185.0,
  185.0, 185.0, 185.0, 185.0, 180.0, 180.0, 180.0, 180.0, 186.0, 186.0, 186.0,
  186.0, 186.0, 186.0, 193.0, 193.0, 199.0, 199.0, 199.0, 199.0, 199.0, 157.0,
  157.0, 157.0, 157.0, 157.0, 157.0, 157.0, 199.0, 199.0, 193.0, 193.0, 193.0,
  193.0, 193.0, 193.0, 193.0, 193.0, 158.0, 158.0, 158.0, 158.0, 158.0, 158.0,
  158.0, 158.0, 158.0, 159.0, 159.0, 159.0, 159.0, 159.0, 159.0, 159.0, 184.0,
  184.0, 184.0, 184.0, 176.0, 176.0, 176.0, 164.0, 181.0, 181.0, 181.0, 181.0,
  181.0, 147.0, 147.0, 147.0, 147.0, 141.0, 141.0, 141.0, 141.0, 141.0, 141.0,
  141.0, 141.0, 141.0, 141.0, 141.0, 141.0, 153.0, 153.0, 163.0, 153.0, 153.0,
  153.0, 152.0, 160.0, 160.0, 163.0, 163.0, 163.0, 163.0, 163.0, 185.0, 185.0,
  185.0, 185.0, 184.0, 184.0, 184.0, 184.0, 184.0, 191.0, 191.0, 191.0, 181.0,
  181.0, 181.0, 181.0, 181.0, 181.0, 181.0, 181.0, 181.0, 181.0, 181.0, 181.0,
  173.0, 173.0, 173.0, 173.0, 161.0, 161.0, 161.0, 161.0, 161.0, 161.0, 161.0,
  161.0, 161.0, 161.0, 162.0, 162.0, 162.0, 162.0, 162.0, 162.0, 162.0, 152.0,
  157.0, 157.0, 157.0, 157.0, 157.0, 157.0, 153.0, 153.0, 153.0, 153.0, 141.0,
  141.0, 141.0, 141.0, 141.0, 135.0, 135.0, 135.0, 136.0, 136.0, 136.0, 134.0,
  134.0, 134.0, 134.0, 134.0, 136.0, 134.0, 134.0, 134.0, 134.0, 134.0, 134.0,
  134.0, 138.0, 138.0, 138.0, 133.0, 133.0, 133.0, 138.0, 133.0, 133.0, 130.0,
  130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 130.0, 150.0,
  150.0, 150.0, 130.0, 127.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0, 142.0,
  142.0, 142.0, 142.0, 142.0, 152.0, 152.0, 149.0, 149.0, 149.0, 149.0, 149.0,
  136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 136.0, 131.0, 131.0, 131.0,
  131.0, 127.0, 127.0, 127.0, 127.0, 132.0, 126.0, 132.0, 135.0, 135.0, 126.0,
  126.0, 126.0, 126.0, 134.0, 134.0, 134.0, 134.0, 132.0, 132.0, 132.0, 132.0,
  132.0, 132.0, 129.0, 129.0, 129.0, 120.0, 120.0, 120.0, 120.0, 120.0, 120.0,
  120.0, 120.0, 120.0, 120.0, 120.0, 114.0, 114.0, 114.0, 114.0, 114.0, 114.0,
  114.0, 114.0, 131.0, 131.0, 131.0, 131.0, 131.0, 131.0, 138.0, 146.0, 146.0,
  146.0, 146.0, 146.0, 146.0, 146.0, 153.0, 144.0, 144.0, 144.0, 144.0, 144.0,
  144.0, 144.0, 144.0, 108.0, 108.0, 108.0, 144.0, 144.0, 129.0, 129.0, 113.0,
  113.0, 113.0, 108.0, 108.0, 108.0, 108.0, 108.0, 108.0, 108.0, 108.0, 127.0,
  127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 127.0, 156.0, 156.0, 135.0,
  135.0, 135.0, 127.0, 135.0, 127.0, 127.0, 127.0, 127.0, 111.0, 111.0, 111.0,
  98.0, 98.0, 111.0, 111.0, 111.0, 111.0, 104.0, 104.0, 128.0, 128.0, 128.0,
  135.0, 98.0, 112.0, 112.0, 112.0, 112.0, 112.0, 121.0, 99.0, 99.0, 99.0, 99.0,
  99.0, 99.0, 99.0, 99.0, 99.0, 121.0, 121.0, 129.0, 129.0, 129.0, 129.0, 129.0,
  94.0, 94.0, 94.0, 113.0, 113.0, 113.0, 90.0, 90.0, 116.0, 116.0, 123.0, 139.0,
  139.0, 116.0, 152.0, 124.0, 124.0, 145.0, 145.0, 153.0, 150.0, 150.0, 150.0,
  150.0, 163.0, 163.0, 163.0, 163.0, 182.0, 174.0, 174.0, 153.0, 142.0, 142.0,
  142.0, 169.0, 169.0, 169.0, 169.0, 154.0, 154.0, 154.0, 143.0, 143.0, 143.0,
  143.0, 143.0, 143.0, 143.0, 143.0, 150.0, 150.0, 150.0, 150.0, 150.0, 141.0,
  141.0, 141.0, 134.0, 134.0, 134.0, 134.0, 113.0, 113.0, 113.0, 113.0, 113.0,
  113.0, 113.0, 113.0, 113.0, 113.0, 113.0, 114.0, 114.0, 114.0, 120.0, 120.0,
  127.0, 127.0, 127.0, 127.0, 127.0, 136.0, 136.0, 136.0, 136.0, 150.0, 150.0,
  150.0, 150.0, 161.0, 161.0, 177.0, 177.0, 177.0, 188.0, 188.0, 188.0, 188.0,
  188.0, 192.0, 192.0, 192.0, 192.0, 192.0, 192.0, 192.0, 189.0, 189.0, 189.0,
  191.0, 191.0, 191.0, 191.0, 188.0, 188.0, 193.0, 186.0, 186.0, 193.0, 188.0,
  188.0, 188.0, 184.0, 187.0, 187.0, 187.0, 187.0, 191.0, 191.0, 191.0, 191.0,
  191.0, 180.0, 181.0, 181.0, 181.0, 180.0, 180.0, 180.0, 180.0, 179.0, 179.0,
  171.0, 171.0, 171.0, 171.0, 171.0, 171.0, 171.0, 161.0, 161.0, 161.0, 157.0,
  157.0, 157.0, 157.0, 157.0, 180.0, 180.0, 180.0, 180.0, 150.0, 150.0, 150.0,
  150.0, 150.0, 150.0, 163.0, 163.0, 163.0, 154.0, 154.0, 154.0, 140.0, 140.0,
  140.0, 130.0, 130.0, 140.0, 140.0, 140.0, 135.0, 135.0, 146.0, 146.0, 146.0,
  158.0, 158.0, 158.0, 158.0, 158.0, 168.0, 158.0, 158.0, 158.0, 166.0, 166.0,
  166.0, 158.0, 158.0, 158.0, 158.0, 158.0, 155.0, 166.0, 166.0, 166.0, 166.0,
  168.0, 166.0, 168.0, 175.0, 175.0, 175.0, 175.0, 176.0, 176.0, 176.0, 176.0,
  176.0, 181.0, 178.0, 178.0, 170.0, 170.0, 170.0, 170.0, 170.0, 170.0, 178.0,
  155.0, 155.0, 155.0, 153.0, 153.0, 137.0, 137.0, 137.0, 137.0, 137.0, 128.0,
  128.0, 128.0, 128.0, 152.0, 152.0, 152.0, 152.0, 157.0, 157.0, 157.0, 157.0,
  157.0, 144.0, 144.0, 144.0, 144.0, 144.0, 166.0, 166.0, 166.0, 166.0, 166.0,
  166.0, 166.0, 129.0, 129.0, 140.0, 140.0, 140.0, 140.0, 140.0, 140.0, 166.0,
  166.0, 166.0, 166.0, 166.0, 166.0, 166.0, 184.0, 196.0, 196.0, 196.0, 196.0,
  184.0, 184.0, 188.0, 188.0, 188.0, 188.0, 188.0, 188.0, 195.0, 208.0, 208.0,
  208.0, 208.0, 208.0, 209.0, 209.0, 209.0, 209.0, 209.0, 209.0, 208.0, 208.0,
  195.0, 195.0, 201.0, 201.0, 201.0, 201.0, 201.0, 188.0, 188.0, 188.0, 188.0,
  188.0, 188.0, 196.0, 196.0, 196.0, 196.0, 196.0, 188.0, 188.0, 188.0, 169.0,
  169.0, 169.0, 169.0, 169.0, 169.0, 152.0, 152.0, 152.0, 152.0, 152.0, 152.0,
  152.0, 152.0, 134.0, 134.0, 134.0, 134.0, 142.0, 142.0, 142.0, 169.0, 169.0,
  169.0, 188.0, 188.0, 188.0, 168.0, 168.0, 168.0, 168.0, 171.0, 171.0, 171.0,
  171.0, 171.0, 193.0, 193.0, 193.0, 193.0, 201.0, 201.0, 193.0, 191.0, 184.0,
  184.0, 184.0, 172.0, 172.0, 172.0, 172.0, 172.0, 172.0, 154.0, 154.0, 154.0,
  154.0, 152.0, 142.0, 142.0, 142.0, 155.0, 160.0, 160.0, 160.0, 160.0, 160.0,
  149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 149.0, 159.0, 159.0,
  159.0, 159.0, 159.0, 174.0, 174.0, 174.0, 172.0, 172.0, 172.0, 172.0, 174.0,
  174.0, 174.0, 179.0, 179.0, 179.0, 179.0, 180.0, 180.0, 180.0, 180.0, 179.0,
  179.0, 179.0, 179.0, 180.0, 180.0, 180.0, 180.0, 186.0, 180.0, 180.0, 180.0,
  194.0, 196.0, 196.0, 196.0, 196.0, 196.0, 196.0, 196.0, 205.0,
];

const CHART_SMOOTH_FACTOR = 30;

function smoothDataWithSavitzkyGolay(data) {
  const smoothedData = [];
  for (let i = 0; i < data.length; i++) {
    const windowStart = Math.max(0, i - Math.floor(CHART_SMOOTH_FACTOR / 2));
    const windowEnd = Math.min(
      data.length - 1,
      i + Math.floor(CHART_SMOOTH_FACTOR / 2)
    );
    const windowSum = data
      .slice(windowStart, windowEnd + 1)
      .reduce((sum, value) => sum + value, 0);
    smoothedData.push(windowSum / (windowEnd - windowStart + 1));
  }
  return smoothedData;
}

const chartsToGenerates = [
  {
    km: 12,
    data: smoothDataWithSavitzkyGolay(PROFILE_12_KM),
    id: "chart_12",
  },
  {
    km: 25,
    data: smoothDataWithSavitzkyGolay(PROFILE_25_KM),
    id: "chart_25",
  },
  {
    km: 42,
    data: smoothDataWithSavitzkyGolay(PROFILE_42_KM),
    id: "chart_42",
  },
];

chartsToGenerates.forEach((chart) => {
  let ctx = document.getElementById(chart.id).getContext("2d");
  new Chart(ctx, {
    type: "line",
    data: {
      labels: chart.data.map(
        (v, i) => `${Math.floor((chart.km * i) / chart.data.length)} km`
      ),
      datasets: [
        {
          label: `${chart.km} km - Dénivelé (m)`,
          data: chart.data,
          tension: 0.5,
          borderColor: "#de0a3d",
          backgroundColor: "#de0a3d22",
          borderWidth: 2,
          fill: true,
          pointRadius: 0,
          tension: 0.5,
        },
      ],
    },
    options: {
      responsive: true,
      scales: {
        y: {
          title: {
            display: true,
            text: "Dénivelé (m)",
          },
        },
        x: {
          title: {
            display: false,
          },
        },
      },
    },
  });
});
